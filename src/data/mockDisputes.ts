import { Dispute, DisputeCategory } from '@/types/dispute';

export const MOCK_DISPUTES: Dispute[] = [
  {
    dispute_id: 'disp-001',
    id: 'disp-001',
    created_at: '2026-02-18T14:00:00Z',
    updated_at: '2026-02-18T14:30:00Z',
    vendor_name: 'Ryanair',
    category: 'flight_delay',
    estimated_value: 250,
    status: 'AWAITING_USER_APPROVAL',
    flight_number: 'FR4821',
    booking_ref: 'RYN-8834X',
    email_subject: 'Your Ryanair flight FR4821 was delayed 4h 23m',
    email_body: 'Dear passenger, we regret to inform you that flight FR4821 from Dublin to Barcelona on 15 Feb 2026 experienced a delay of 4 hours and 23 minutes due to operational reasons.',
    draft_claim: 'Dear Ryanair Customer Relations,\n\nI am writing to claim compensation under EU Regulation 261/2004 for flight FR4821 (Dublin → Barcelona) on 15 February 2026, which was delayed by 4 hours and 23 minutes.\n\nUnder the regulation, I am entitled to €250 compensation for this delay on a flight of this distance.\n\nBooking reference: RYN-8834X\n\nPlease process this claim within 14 days.\n\nRegards',
    draft_payload_json: {
      regulation: 'EU261/2004',
      flight: 'FR4821',
      route: 'DUB-BCN',
      delay_hours: 4.38,
      compensation_eur: 250,
      booking_ref: 'RYN-8834X',
    },
    messages: [],
    agent_runs: [
      {
        agent_run_id: 'run-001',
        dispute_id: 'disp-001',
        agent_name: 'claim_drafter',
        step_name: 'billing_stub',
        status: 'completed',
        input_json: {},
        output_json: { compute_cost_usd: 0.15, value_generated_usd: 250, margin_pct: 99.9 },
        error_text: null,
        created_at: '2026-02-18T14:00:00Z',
      },
    ],
  },
  {
    dispute_id: 'disp-002',
    id: 'disp-002',
    created_at: '2026-02-16T09:00:00Z',
    updated_at: '2026-02-17T09:00:00Z',
    vendor_name: 'DHL',
    category: 'damaged_parcel',
    estimated_value: 85,
    status: 'WAITING_VENDOR_RESPONSE',
    booking_ref: 'DHL-99281',
    email_subject: 'DHL Delivery Confirmation - Package damaged on arrival',
    email_body: 'Your package (tracking: DHL-99281) was delivered on 14 Feb 2026. The recipient has reported damage to the contents.',
    draft_claim: 'Dear DHL Claims Department,\n\nI am filing a damage claim for parcel DHL-99281.\n\nEstimated value of damaged goods: $85.00',
    draft_payload_json: { tracking: 'DHL-99281', damage_value_usd: 85 },
    messages: [],
    agent_runs: [
      {
        agent_run_id: 'run-002',
        dispute_id: 'disp-002',
        agent_name: 'claim_drafter',
        step_name: 'billing_stub',
        status: 'completed',
        input_json: {},
        output_json: { compute_cost_usd: 0.12, value_generated_usd: 85, margin_pct: 99.9 },
        error_text: null,
        created_at: '2026-02-16T09:30:00Z',
      },
    ],
  },
  {
    dispute_id: 'disp-003',
    id: 'disp-003',
    created_at: '2026-02-14T08:00:00Z',
    updated_at: '2026-02-15T12:00:00Z',
    vendor_name: 'Amazon',
    category: 'late_delivery',
    estimated_value: 30,
    status: 'RESOLVED_SUCCESS',
    booking_ref: 'AMZ-114-2938',
    email_subject: 'Your Amazon Prime delivery was late',
    email_body: 'Your guaranteed delivery for order AMZ-114-2938 was missed.',
    messages: [],
    agent_runs: [],
  },
  {
    dispute_id: 'disp-004',
    id: 'disp-004',
    created_at: '2026-02-12T10:00:00Z',
    updated_at: '2026-02-13T16:00:00Z',
    vendor_name: 'EasyJet',
    category: 'cancellation',
    estimated_value: 180,
    status: 'RESOLVED_REJECTED',
    flight_number: 'U2-4417',
    booking_ref: 'EZJ-77120',
    email_subject: 'EasyJet flight U2-4417 cancellation notice',
    email_body: 'Flight U2-4417 has been cancelled.',
    messages: [],
    agent_runs: [],
  },
  {
    dispute_id: 'disp-005',
    id: 'disp-005',
    created_at: '2026-02-10T08:00:00Z',
    updated_at: '2026-02-10T08:00:00Z',
    vendor_name: 'FedEx',
    category: 'damaged_parcel',
    estimated_value: 120,
    status: 'DISCARDED_BY_USER',
    booking_ref: 'FDX-55102',
    email_subject: 'FedEx shipment FDX-55102 damage report',
    email_body: 'A damage report has been filed for shipment FDX-55102.',
    messages: [],
    agent_runs: [],
  },
  {
    dispute_id: 'disp-006',
    id: 'disp-006',
    created_at: '2026-02-08T07:00:00Z',
    updated_at: '2026-02-09T11:00:00Z',
    vendor_name: 'Lufthansa',
    category: 'flight_delay',
    estimated_value: 400,
    status: 'FAILED',
    flight_number: 'LH-1823',
    booking_ref: 'LH-MUC-9912',
    email_subject: 'Lufthansa flight LH-1823 delay compensation denied',
    email_body: 'Your compensation claim for flight LH-1823 has been reviewed.',
    messages: [],
    agent_runs: [],
  },
];

const VENDOR_POOL = [
  { name: 'Ryanair', categories: ['flight_delay', 'cancellation'] as DisputeCategory[] },
  { name: 'DHL', categories: ['damaged_parcel', 'late_delivery'] as DisputeCategory[] },
  { name: 'Amazon', categories: ['late_delivery', 'overcharge'] as DisputeCategory[] },
  { name: 'EasyJet', categories: ['flight_delay', 'cancellation'] as DisputeCategory[] },
  { name: 'FedEx', categories: ['damaged_parcel', 'late_delivery'] as DisputeCategory[] },
  { name: 'Hermes', categories: ['damaged_parcel', 'late_delivery'] as DisputeCategory[] },
];

export function generateMockDispute(): Dispute {
  const vendor = VENDOR_POOL[Math.floor(Math.random() * VENDOR_POOL.length)];
  const category = vendor.categories[Math.floor(Math.random() * vendor.categories.length)];
  const estimatedValue = Math.floor(Math.random() * 220) + 30;
  const did = `disp-${Date.now().toString(36)}`;

  return {
    dispute_id: did,
    id: did,
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
    vendor_name: vendor.name,
    category,
    estimated_value: estimatedValue,
    status: 'SCANNED_MATCH',
    email_subject: `New ${category.replace('_', ' ')} claim detected — ${vendor.name}`,
    email_body: `An automated scan detected a potential ${category.replace('_', ' ')} dispute with ${vendor.name}. Estimated recoverable value: $${estimatedValue}.`,
    messages: [],
    agent_runs: [],
  };
}
